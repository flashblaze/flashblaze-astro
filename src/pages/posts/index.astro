---
import { getCollection } from 'astro:content';

import Post from '../../components/Astro/Post.astro';
import Main from '../../layouts/Main.astro';

const posts = await getCollection('posts');

const sortedPosts = posts.sort((a, b) => {
  const d1 = new Date(a.data.date);
  const d2 = new Date(b.data.date);

  return d2.getTime() - d1.getTime();
});
---

<Main
  title='Posts'
  description='Tech posts written to solve poverty and realize world peace'
  ogUrl='https://flashblaze.xyz/posts'
>
  {
    sortedPosts.map(post => (
      <Post date={post.data.date} href={`/posts/${post.slug}`}>
        {post.data.title}
      </Post>
    ))
  }
</Main>
